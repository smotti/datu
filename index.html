<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE-edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Datu</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
    <div id="datu"></div>
    
    <script src="js/datu.js"></script>
    <script>
      var node = document.getElementById("datu");
      var app = Elm.Datu.embed(node);

      if (!("Notification" in window)) {
	      app.ports.alert.send("This browser does not support system notifications", "alert-danger");
      } else if (Notification.permission === "denied" || Notification.permission === "default") {
        Notification.requestPermission().then(function(result) {
          app.ports.permission.send(result);
	      });
      }

      app.ports.notification.subscribe(function(msg) {
        var n = new Notification('Datu', { body: msg });
        setTimeout(n.close.bind(n), 5000);
      });
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>
